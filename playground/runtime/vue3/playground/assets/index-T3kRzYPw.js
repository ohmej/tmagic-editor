function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/comp-entry-MVY3HTlM.js","assets/comp-entry-8rTPf1nS.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var Xi=Object.defineProperty;var Zi=(t,e,r)=>e in t?Xi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var y=(t,e,r)=>(Zi(t,typeof e!="symbol"?e+"":e,r),r),hr=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var U=(t,e,r)=>(hr(t,e,"read from private field"),r?r.call(t):e.get(t)),z=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},V=(t,e,r,n)=>(hr(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);function Og(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const Qi="modulepreload",Vi=function(t){return"/tmagic-editor/playground/runtime/vue3/playground/"+t},dr={},Se=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){const s=document.getElementsByTagName("link");i=Promise.all(r.map(o=>{if(o=Vi(o),o in dr)return;dr[o]=!0;const a=o.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!n)for(let f=s.length-1;f>=0;f--){const $=s[f];if($.href===o&&(!a||$.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(o,'"]').concat(c)))return;const l=document.createElement("link");if(l.rel=a?"stylesheet":Qi,a||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),a)return new Promise((f,$)=>{l.addEventListener("load",f),l.addEventListener("error",()=>$(new Error("Unable to preload CSS for ".concat(o))))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var wn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function He(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Be={exports:{}},_t=typeof Reflect=="object"?Reflect:null,pr=_t&&typeof _t.apply=="function"?_t.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},te;_t&&typeof _t.ownKeys=="function"?te=_t.ownKeys:Object.getOwnPropertySymbols?te=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:te=function(e){return Object.getOwnPropertyNames(e)};function ts(t){console&&console.warn&&console.warn(t)}var On=Number.isNaN||function(e){return e!==e};function S(){S.init.call(this)}Be.exports=S;Be.exports.once=is;S.EventEmitter=S;S.prototype._events=void 0;S.prototype._eventsCount=0;S.prototype._maxListeners=void 0;var gr=10;function he(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(S,"defaultMaxListeners",{enumerable:!0,get:function(){return gr},set:function(t){if(typeof t!="number"||t<0||On(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");gr=t}});S.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};S.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||On(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Sn(t){return t._maxListeners===void 0?S.defaultMaxListeners:t._maxListeners}S.prototype.getMaxListeners=function(){return Sn(this)};S.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")pr(c,this,r);else for(var u=c.length,l=Dn(c,u),n=0;n<u;++n)pr(l[n],this,r);return!0};function En(t,e,r,n){var i,s,o;if(he(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Sn(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,ts(a)}return t}S.prototype.addListener=function(e,r){return En(this,e,r,!1)};S.prototype.on=S.prototype.addListener;S.prototype.prependListener=function(e,r){return En(this,e,r,!0)};function es(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function jn(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=es.bind(n);return i.listener=r,n.wrapFn=i,i}S.prototype.once=function(e,r){return he(r),this.on(e,jn(this,e,r)),this};S.prototype.prependOnceListener=function(e,r){return he(r),this.prependListener(e,jn(this,e,r)),this};S.prototype.removeListener=function(e,r){var n,i,s,o,a;if(he(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():rs(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};S.prototype.off=S.prototype.removeListener;S.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function An(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?ns(i):Dn(i,i.length)}S.prototype.listeners=function(e){return An(this,e,!0)};S.prototype.rawListeners=function(e){return An(this,e,!1)};S.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Cn.call(t,e)};S.prototype.listenerCount=Cn;function Cn(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}S.prototype.eventNames=function(){return this._eventsCount>0?te(this._events):[]};function Dn(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function rs(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function ns(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function is(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Mn(t,e,s,{once:!0}),e!=="error"&&ss(t,i,{once:!0})})}function ss(t,e,r){typeof t.on=="function"&&Mn(t,"error",e,r)}function Mn(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var We=Be.exports;const Pn=He(We);var os=typeof global=="object"&&global&&global.Object===Object&&global;const In=os;var as=typeof self=="object"&&self&&self.Object===Object&&self,cs=In||as||Function("return this")();const q=cs;var us=q.Symbol;const et=us;var xn=Object.prototype,fs=xn.hasOwnProperty,ls=xn.toString,It=et?et.toStringTag:void 0;function hs(t){var e=fs.call(t,It),r=t[It];try{t[It]=void 0;var n=!0}catch(s){}var i=ls.call(t);return n&&(e?t[It]=r:delete t[It]),i}var ds=Object.prototype,ps=ds.toString;function gs(t){return ps.call(t)}var ys="[object Null]",$s="[object Undefined]",yr=et?et.toStringTag:void 0;function Et(t){return t==null?t===void 0?$s:ys:yr&&yr in Object(t)?hs(t):gs(t)}function jt(t){return t!=null&&typeof t=="object"}var ms="[object Symbol]";function ze(t){return typeof t=="symbol"||jt(t)&&Et(t)==ms}function bs(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var vs=Array.isArray;const rt=vs;var _s=1/0,$r=et?et.prototype:void 0,mr=$r?$r.toString:void 0;function Ln(t){if(typeof t=="string")return t;if(rt(t))return bs(t,Ln)+"";if(ze(t))return mr?mr.call(t):"";var e=t+"";return e=="0"&&1/t==-_s?"-0":e}function lt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ts="[object AsyncFunction]",ws="[object Function]",Os="[object GeneratorFunction]",Ss="[object Proxy]";function Nn(t){if(!lt(t))return!1;var e=Et(t);return e==ws||e==Os||e==Ts||e==Ss}var Es=q["__core-js_shared__"];const Ee=Es;var br=function(){var t=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function js(t){return!!br&&br in t}var As=Function.prototype,Cs=As.toString;function pt(t){if(t!=null){try{return Cs.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var Ds=/[\\^$.*+?()[\]{}|]/g,Ms=/^\[object .+?Constructor\]$/,Ps=Function.prototype,Is=Object.prototype,xs=Ps.toString,Ls=Is.hasOwnProperty,Ns=RegExp("^"+xs.call(Ls).replace(Ds,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Fs(t){if(!lt(t)||js(t))return!1;var e=Nn(t)?Ns:Ms;return e.test(pt(t))}function Rs(t,e){return t==null?void 0:t[e]}function gt(t,e){var r=Rs(t,e);return Fs(r)?r:void 0}var Us=gt(q,"WeakMap");const Me=Us;var vr=Object.create,Hs=function(){function t(){}return function(e){if(!lt(e))return{};if(vr)return vr(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const Bs=Hs;function Ws(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var zs=function(){try{var t=gt(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();const _r=zs;function Gs(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var qs=9007199254740991,Ks=/^(?:0|[1-9]\d*)$/;function Ge(t,e){var r=typeof t;return e=e==null?qs:e,!!e&&(r=="number"||r!="symbol"&&Ks.test(t))&&t>-1&&t%1==0&&t<e}function Fn(t,e,r){e=="__proto__"&&_r?_r(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Rn(t,e){return t===e||t!==t&&e!==e}var Ys=Object.prototype,ks=Ys.hasOwnProperty;function qe(t,e,r){var n=t[e];(!(ks.call(t,e)&&Rn(n,r))||r===void 0&&!(e in t))&&Fn(t,e,r)}function de(t,e,r,n){var i=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=n?n(r[a],t[a],a,r,t):void 0;c===void 0&&(c=t[a]),i?Fn(r,a,c):qe(r,a,c)}return r}var Js=9007199254740991;function Ke(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Js}function Ye(t){return t!=null&&Ke(t.length)&&!Nn(t)}var Xs=Object.prototype;function pe(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Xs;return t===r}function Zs(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Qs="[object Arguments]";function Tr(t){return jt(t)&&Et(t)==Qs}var Un=Object.prototype,Vs=Un.hasOwnProperty,to=Un.propertyIsEnumerable,eo=Tr(function(){return arguments}())?Tr:function(t){return jt(t)&&Vs.call(t,"callee")&&!to.call(t,"callee")};const ke=eo;function ro(){return!1}var Hn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,wr=Hn&&typeof module=="object"&&module&&!module.nodeType&&module,no=wr&&wr.exports===Hn,Or=no?q.Buffer:void 0,io=Or?Or.isBuffer:void 0,so=io||ro;const Je=so;var oo="[object Arguments]",ao="[object Array]",co="[object Boolean]",uo="[object Date]",fo="[object Error]",lo="[object Function]",ho="[object Map]",po="[object Number]",go="[object Object]",yo="[object RegExp]",$o="[object Set]",mo="[object String]",bo="[object WeakMap]",vo="[object ArrayBuffer]",_o="[object DataView]",To="[object Float32Array]",wo="[object Float64Array]",Oo="[object Int8Array]",So="[object Int16Array]",Eo="[object Int32Array]",jo="[object Uint8Array]",Ao="[object Uint8ClampedArray]",Co="[object Uint16Array]",Do="[object Uint32Array]",M={};M[To]=M[wo]=M[Oo]=M[So]=M[Eo]=M[jo]=M[Ao]=M[Co]=M[Do]=!0;M[oo]=M[ao]=M[vo]=M[co]=M[_o]=M[uo]=M[fo]=M[lo]=M[ho]=M[po]=M[go]=M[yo]=M[$o]=M[mo]=M[bo]=!1;function Mo(t){return jt(t)&&Ke(t.length)&&!!M[Et(t)]}function Xe(t){return function(e){return t(e)}}var Bn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Lt=Bn&&typeof module=="object"&&module&&!module.nodeType&&module,Po=Lt&&Lt.exports===Bn,je=Po&&In.process,Io=function(){try{var t=Lt&&Lt.require&&Lt.require("util").types;return t||je&&je.binding&&je.binding("util")}catch(e){}}();const Ot=Io;var Sr=Ot&&Ot.isTypedArray,xo=Sr?Xe(Sr):Mo;const Wn=xo;var Lo=Object.prototype,No=Lo.hasOwnProperty;function zn(t,e){var r=rt(t),n=!r&&ke(t),i=!r&&!n&&Je(t),s=!r&&!n&&!i&&Wn(t),o=r||n||i||s,a=o?Zs(t.length,String):[],c=a.length;for(var u in t)(e||No.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ge(u,c)))&&a.push(u);return a}function Gn(t,e){return function(r){return t(e(r))}}var Fo=Gn(Object.keys,Object);const Ro=Fo;var Uo=Object.prototype,Ho=Uo.hasOwnProperty;function qn(t){if(!pe(t))return Ro(t);var e=[];for(var r in Object(t))Ho.call(t,r)&&r!="constructor"&&e.push(r);return e}function Ze(t){return Ye(t)?zn(t):qn(t)}function Bo(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Wo=Object.prototype,zo=Wo.hasOwnProperty;function Go(t){if(!lt(t))return Bo(t);var e=pe(t),r=[];for(var n in t)n=="constructor"&&(e||!zo.call(t,n))||r.push(n);return r}function Qe(t){return Ye(t)?zn(t,!0):Go(t)}var qo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ko=/^\w*$/;function Yo(t,e){if(rt(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||ze(t)?!0:Ko.test(t)||!qo.test(t)||e!=null&&t in Object(e)}var ko=gt(Object,"create");const Rt=ko;function Jo(){this.__data__=Rt?Rt(null):{},this.size=0}function Xo(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Zo="__lodash_hash_undefined__",Qo=Object.prototype,Vo=Qo.hasOwnProperty;function ta(t){var e=this.__data__;if(Rt){var r=e[t];return r===Zo?void 0:r}return Vo.call(e,t)?e[t]:void 0}var ea=Object.prototype,ra=ea.hasOwnProperty;function na(t){var e=this.__data__;return Rt?e[t]!==void 0:ra.call(e,t)}var ia="__lodash_hash_undefined__";function sa(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Rt&&e===void 0?ia:e,this}function ht(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ht.prototype.clear=Jo;ht.prototype.delete=Xo;ht.prototype.get=ta;ht.prototype.has=na;ht.prototype.set=sa;function oa(){this.__data__=[],this.size=0}function ge(t,e){for(var r=t.length;r--;)if(Rn(t[r][0],e))return r;return-1}var aa=Array.prototype,ca=aa.splice;function ua(t){var e=this.__data__,r=ge(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():ca.call(e,r,1),--this.size,!0}function fa(t){var e=this.__data__,r=ge(e,t);return r<0?void 0:e[r][1]}function la(t){return ge(this.__data__,t)>-1}function ha(t,e){var r=this.__data__,n=ge(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function k(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}k.prototype.clear=oa;k.prototype.delete=ua;k.prototype.get=fa;k.prototype.has=la;k.prototype.set=ha;var da=gt(q,"Map");const Ut=da;function pa(){this.size=0,this.__data__={hash:new ht,map:new(Ut||k),string:new ht}}function ga(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function ye(t,e){var r=t.__data__;return ga(e)?r[typeof e=="string"?"string":"hash"]:r.map}function ya(t){var e=ye(this,t).delete(t);return this.size-=e?1:0,e}function $a(t){return ye(this,t).get(t)}function ma(t){return ye(this,t).has(t)}function ba(t,e){var r=ye(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function nt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}nt.prototype.clear=pa;nt.prototype.delete=ya;nt.prototype.get=$a;nt.prototype.has=ma;nt.prototype.set=ba;var va="Expected a function";function Ve(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(va);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=t.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(Ve.Cache||nt),r}Ve.Cache=nt;var _a=500;function Ta(t){var e=Ve(t,function(n){return r.size===_a&&r.clear(),n}),r=e.cache;return e}var wa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oa=/\\(\\)?/g,Sa=Ta(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(wa,function(r,n,i,s){e.push(i?s.replace(Oa,"$1"):n||r)}),e});const Ea=Sa;function ja(t){return t==null?"":Ln(t)}function Kn(t,e){return rt(t)?t:Yo(t,e)?[t]:Ea(ja(t))}var Aa=1/0;function Yn(t){if(typeof t=="string"||ze(t))return t;var e=t+"";return e=="0"&&1/t==-Aa?"-0":e}function kn(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var Ca=Gn(Object.getPrototypeOf,Object);const Jn=Ca;function Da(){this.__data__=new k,this.size=0}function Ma(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function Pa(t){return this.__data__.get(t)}function Ia(t){return this.__data__.has(t)}var xa=200;function La(t,e){var r=this.__data__;if(r instanceof k){var n=r.__data__;if(!Ut||n.length<xa-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new nt(n)}return r.set(t,e),this.size=r.size,this}function At(t){var e=this.__data__=new k(t);this.size=e.size}At.prototype.clear=Da;At.prototype.delete=Ma;At.prototype.get=Pa;At.prototype.has=Ia;At.prototype.set=La;function Na(t,e){return t&&de(e,Ze(e),t)}function Fa(t,e){return t&&de(e,Qe(e),t)}var Xn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Er=Xn&&typeof module=="object"&&module&&!module.nodeType&&module,Ra=Er&&Er.exports===Xn,jr=Ra?q.Buffer:void 0,Ar=jr?jr.allocUnsafe:void 0;function Ua(t,e){if(e)return t.slice();var r=t.length,n=Ar?Ar(r):new t.constructor(r);return t.copy(n),n}function Ha(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[i++]=o)}return s}function Zn(){return[]}var Ba=Object.prototype,Wa=Ba.propertyIsEnumerable,Cr=Object.getOwnPropertySymbols,za=Cr?function(t){return t==null?[]:(t=Object(t),Ha(Cr(t),function(e){return Wa.call(t,e)}))}:Zn;const tr=za;function Ga(t,e){return de(t,tr(t),e)}var qa=Object.getOwnPropertySymbols,Ka=qa?function(t){for(var e=[];t;)kn(e,tr(t)),t=Jn(t);return e}:Zn;const Qn=Ka;function Ya(t,e){return de(t,Qn(t),e)}function Vn(t,e,r){var n=e(t);return rt(t)?n:kn(n,r(t))}function ka(t){return Vn(t,Ze,tr)}function Ja(t){return Vn(t,Qe,Qn)}var Xa=gt(q,"DataView");const Pe=Xa;var Za=gt(q,"Promise");const Ie=Za;var Qa=gt(q,"Set");const xe=Qa;var Dr="[object Map]",Va="[object Object]",Mr="[object Promise]",Pr="[object Set]",Ir="[object WeakMap]",xr="[object DataView]",tc=pt(Pe),ec=pt(Ut),rc=pt(Ie),nc=pt(xe),ic=pt(Me),at=Et;(Pe&&at(new Pe(new ArrayBuffer(1)))!=xr||Ut&&at(new Ut)!=Dr||Ie&&at(Ie.resolve())!=Mr||xe&&at(new xe)!=Pr||Me&&at(new Me)!=Ir)&&(at=function(t){var e=Et(t),r=e==Va?t.constructor:void 0,n=r?pt(r):"";if(n)switch(n){case tc:return xr;case ec:return Dr;case rc:return Mr;case nc:return Pr;case ic:return Ir}return e});const $e=at;var sc=Object.prototype,oc=sc.hasOwnProperty;function ac(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&oc.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var cc=q.Uint8Array;const Lr=cc;function er(t){var e=new t.constructor(t.byteLength);return new Lr(e).set(new Lr(t)),e}function uc(t,e){var r=e?er(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var fc=/\w*$/;function lc(t){var e=new t.constructor(t.source,fc.exec(t));return e.lastIndex=t.lastIndex,e}var Nr=et?et.prototype:void 0,Fr=Nr?Nr.valueOf:void 0;function hc(t){return Fr?Object(Fr.call(t)):{}}function dc(t,e){var r=e?er(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var pc="[object Boolean]",gc="[object Date]",yc="[object Map]",$c="[object Number]",mc="[object RegExp]",bc="[object Set]",vc="[object String]",_c="[object Symbol]",Tc="[object ArrayBuffer]",wc="[object DataView]",Oc="[object Float32Array]",Sc="[object Float64Array]",Ec="[object Int8Array]",jc="[object Int16Array]",Ac="[object Int32Array]",Cc="[object Uint8Array]",Dc="[object Uint8ClampedArray]",Mc="[object Uint16Array]",Pc="[object Uint32Array]";function Ic(t,e,r){var n=t.constructor;switch(e){case Tc:return er(t);case pc:case gc:return new n(+t);case wc:return uc(t,r);case Oc:case Sc:case Ec:case jc:case Ac:case Cc:case Dc:case Mc:case Pc:return dc(t,r);case yc:return new n;case $c:case vc:return new n(t);case mc:return lc(t);case bc:return new n;case _c:return hc(t)}}function xc(t){return typeof t.constructor=="function"&&!pe(t)?Bs(Jn(t)):{}}var Lc="[object Map]";function Nc(t){return jt(t)&&$e(t)==Lc}var Rr=Ot&&Ot.isMap,Fc=Rr?Xe(Rr):Nc;const Rc=Fc;var Uc="[object Set]";function Hc(t){return jt(t)&&$e(t)==Uc}var Ur=Ot&&Ot.isSet,Bc=Ur?Xe(Ur):Hc;const Wc=Bc;var zc=1,Gc=2,qc=4,ti="[object Arguments]",Kc="[object Array]",Yc="[object Boolean]",kc="[object Date]",Jc="[object Error]",ei="[object Function]",Xc="[object GeneratorFunction]",Zc="[object Map]",Qc="[object Number]",ri="[object Object]",Vc="[object RegExp]",tu="[object Set]",eu="[object String]",ru="[object Symbol]",nu="[object WeakMap]",iu="[object ArrayBuffer]",su="[object DataView]",ou="[object Float32Array]",au="[object Float64Array]",cu="[object Int8Array]",uu="[object Int16Array]",fu="[object Int32Array]",lu="[object Uint8Array]",hu="[object Uint8ClampedArray]",du="[object Uint16Array]",pu="[object Uint32Array]",A={};A[ti]=A[Kc]=A[iu]=A[su]=A[Yc]=A[kc]=A[ou]=A[au]=A[cu]=A[uu]=A[fu]=A[Zc]=A[Qc]=A[ri]=A[Vc]=A[tu]=A[eu]=A[ru]=A[lu]=A[hu]=A[du]=A[pu]=!0;A[Jc]=A[ei]=A[nu]=!1;function ee(t,e,r,n,i,s){var o,a=e&zc,c=e&Gc,u=e&qc;if(r&&(o=i?r(t,n,i,s):r(t)),o!==void 0)return o;if(!lt(t))return t;var l=rt(t);if(l){if(o=ac(t),!a)return Ws(t,o)}else{var f=$e(t),$=f==ei||f==Xc;if(Je(t))return Ua(t,a);if(f==ri||f==ti||$&&!i){if(o=c||$?{}:xc(t),!a)return c?Ya(t,Fa(o,t)):Ga(t,Na(o,t))}else{if(!A[f])return i?t:{};o=Ic(t,f,a)}}s||(s=new At);var w=s.get(t);if(w)return w;s.set(t,o),Wc(t)?t.forEach(function(T){o.add(ee(T,e,r,T,t,s))}):Rc(t)&&t.forEach(function(T,j){o.set(j,ee(T,e,r,j,t,s))});var D=u?c?Ja:ka:c?Qe:Ze,g=l?void 0:D(t);return Gs(g||t,function(T,j){g&&(j=T,T=t[j]),qe(o,j,ee(T,e,r,j,t,s))}),o}var gu=1,yu=4;function $u(t){return ee(t,gu|yu)}function mu(t,e,r){e=Kn(e,t);for(var n=-1,i=e.length,s=!1;++n<i;){var o=Yn(e[n]);if(!(s=t!=null&&r(t,o)))break;t=t[o]}return s||++n!=i?s:(i=t==null?0:t.length,!!i&&Ke(i)&&Ge(o,i)&&(rt(t)||ke(t)))}var bu=Object.prototype,vu=bu.hasOwnProperty;function _u(t,e){return t!=null&&vu.call(t,e)}function Tu(t,e){return t!=null&&mu(t,e,_u)}var wu="[object Map]",Ou="[object Set]",Su=Object.prototype,Eu=Su.hasOwnProperty;function ju(t){if(t==null)return!0;if(Ye(t)&&(rt(t)||typeof t=="string"||typeof t.splice=="function"||Je(t)||Wn(t)||ke(t)))return!t.length;var e=$e(t);if(e==wu||e==Ou)return!t.size;if(pe(t))return!qn(t).length;for(var r in t)if(Eu.call(t,r))return!1;return!0}function Au(t,e,r,n){if(!lt(t))return t;e=Kn(e,t);for(var i=-1,s=e.length,o=s-1,a=t;a!=null&&++i<s;){var c=Yn(e[i]),u=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(i!=o){var l=a[c];u=n?n(l,c,a):void 0,u===void 0&&(u=lt(l)?l:Ge(e[i+1])?[]:{})}qe(a,c,u),a=a[c]}return t}function Cu(t,e,r){return t==null?t:Au(t,e,r)}var ni={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(wn,function(){var r=1e3,n=6e4,i=36e5,s="millisecond",o="second",a="minute",c="hour",u="day",l="week",f="month",$="quarter",w="year",D="date",g="Invalid Date",T=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,j=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,H={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},F=function(_,p,h){var m=String(_);return!m||m.length>=p?_:""+Array(p+1-m.length).join(h)+_},st={s:F,z:function(_){var p=-_.utcOffset(),h=Math.abs(p),m=Math.floor(h/60),d=h%60;return(p<=0?"+":"-")+F(m,2,"0")+":"+F(d,2,"0")},m:function _(p,h){if(p.date()<h.date())return-_(h,p);var m=12*(h.year()-p.year())+(h.month()-p.month()),d=p.clone().add(m,f),v=h-d<0,b=p.clone().add(m+(v?-1:1),f);return+(-(m+(h-d)/(v?d-b:b-d))||0)},a:function(_){return _<0?Math.ceil(_)||0:Math.floor(_)},p:function(_){return{M:f,y:w,w:l,d:u,D,h:c,m:a,s:o,ms:s,Q:$}[_]||String(_||"").toLowerCase().replace(/s$/,"")},u:function(_){return _===void 0}},B="en",W={};W[B]=H;var ot=function(_){return _ instanceof Xt},bt=function _(p,h,m){var d;if(!p)return B;if(typeof p=="string"){var v=p.toLowerCase();W[v]&&(d=v),h&&(W[v]=h,d=v);var b=p.split("-");if(!d&&b.length>1)return _(b[0])}else{var O=p.name;W[O]=p,d=O}return!m&&d&&(B=d),d||!m&&B},I=function(_,p){if(ot(_))return _.clone();var h=typeof p=="object"?p:{};return h.date=_,h.args=arguments,new Xt(h)},E=st;E.l=bt,E.i=ot,E.w=function(_,p){return I(_,{locale:p.$L,utc:p.$u,x:p.$x,$offset:p.$offset})};var Xt=function(){function _(h){this.$L=bt(h.locale,null,!0),this.parse(h)}var p=_.prototype;return p.parse=function(h){this.$d=function(m){var d=m.date,v=m.utc;if(d===null)return new Date(NaN);if(E.u(d))return new Date;if(d instanceof Date)return new Date(d);if(typeof d=="string"&&!/Z$/i.test(d)){var b=d.match(T);if(b){var O=b[2]-1||0,L=(b[7]||"0").substring(0,3);return v?new Date(Date.UTC(b[1],O,b[3]||1,b[4]||0,b[5]||0,b[6]||0,L)):new Date(b[1],O,b[3]||1,b[4]||0,b[5]||0,b[6]||0,L)}}return new Date(d)}(h),this.$x=h.x||{},this.init()},p.init=function(){var h=this.$d;this.$y=h.getFullYear(),this.$M=h.getMonth(),this.$D=h.getDate(),this.$W=h.getDay(),this.$H=h.getHours(),this.$m=h.getMinutes(),this.$s=h.getSeconds(),this.$ms=h.getMilliseconds()},p.$utils=function(){return E},p.isValid=function(){return this.$d.toString()!==g},p.isSame=function(h,m){var d=I(h);return this.startOf(m)<=d&&d<=this.endOf(m)},p.isAfter=function(h,m){return I(h)<this.startOf(m)},p.isBefore=function(h,m){return this.endOf(m)<I(h)},p.$g=function(h,m,d){return E.u(h)?this[m]:this.set(d,h)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(h,m){var d=this,v=!!E.u(m)||m,b=E.p(h),O=function(vt,R){var Q=E.w(d.$u?Date.UTC(d.$y,R,vt):new Date(d.$y,R,vt),d);return v?Q:Q.endOf(u)},L=function(vt,R){return E.w(d.toDate()[vt].apply(d.toDate("s"),(v?[0,0,0,0]:[23,59,59,999]).slice(R)),d)},x=this.$W,N=this.$M,Z=this.$D,Y="set"+(this.$u?"UTC":"");switch(b){case w:return v?O(1,0):O(31,11);case f:return v?O(1,N):O(0,N+1);case l:var Mt=this.$locale().weekStart||0,Pt=(x<Mt?x+7:x)-Mt;return O(v?Z-Pt:Z+(6-Pt),N);case u:case D:return L(Y+"Hours",0);case c:return L(Y+"Minutes",1);case a:return L(Y+"Seconds",2);case o:return L(Y+"Milliseconds",3);default:return this.clone()}},p.endOf=function(h){return this.startOf(h,!1)},p.$set=function(h,m){var d,v=E.p(h),b="set"+(this.$u?"UTC":""),O=(d={},d[u]=b+"Date",d[D]=b+"Date",d[f]=b+"Month",d[w]=b+"FullYear",d[c]=b+"Hours",d[a]=b+"Minutes",d[o]=b+"Seconds",d[s]=b+"Milliseconds",d)[v],L=v===u?this.$D+(m-this.$W):m;if(v===f||v===w){var x=this.clone().set(D,1);x.$d[O](L),x.init(),this.$d=x.set(D,Math.min(this.$D,x.daysInMonth())).$d}else O&&this.$d[O](L);return this.init(),this},p.set=function(h,m){return this.clone().$set(h,m)},p.get=function(h){return this[E.p(h)]()},p.add=function(h,m){var d,v=this;h=Number(h);var b=E.p(m),O=function(N){var Z=I(v);return E.w(Z.date(Z.date()+Math.round(N*h)),v)};if(b===f)return this.set(f,this.$M+h);if(b===w)return this.set(w,this.$y+h);if(b===u)return O(1);if(b===l)return O(7);var L=(d={},d[a]=n,d[c]=i,d[o]=r,d)[b]||1,x=this.$d.getTime()+h*L;return E.w(x,this)},p.subtract=function(h,m){return this.add(-1*h,m)},p.format=function(h){var m=this,d=this.$locale();if(!this.isValid())return d.invalidDate||g;var v=h||"YYYY-MM-DDTHH:mm:ssZ",b=E.z(this),O=this.$H,L=this.$m,x=this.$M,N=d.weekdays,Z=d.months,Y=function(R,Q,Oe,Zt){return R&&(R[Q]||R(m,v))||Oe[Q].slice(0,Zt)},Mt=function(R){return E.s(O%12||12,R,"0")},Pt=d.meridiem||function(R,Q,Oe){var Zt=R<12?"AM":"PM";return Oe?Zt.toLowerCase():Zt},vt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:x+1,MM:E.s(x+1,2,"0"),MMM:Y(d.monthsShort,x,Z,3),MMMM:Y(Z,x),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:Y(d.weekdaysMin,this.$W,N,2),ddd:Y(d.weekdaysShort,this.$W,N,3),dddd:N[this.$W],H:String(O),HH:E.s(O,2,"0"),h:Mt(1),hh:Mt(2),a:Pt(O,L,!0),A:Pt(O,L,!1),m:String(L),mm:E.s(L,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:b};return v.replace(j,function(R,Q){return Q||vt[R]||b.replace(":","")})},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(h,m,d){var v,b=E.p(m),O=I(h),L=(O.utcOffset()-this.utcOffset())*n,x=this-O,N=E.m(this,O);return N=(v={},v[w]=N/12,v[f]=N,v[$]=N/3,v[l]=(x-L)/6048e5,v[u]=(x-L)/864e5,v[c]=x/i,v[a]=x/n,v[o]=x/r,v)[b]||x,d?N:E.a(N)},p.daysInMonth=function(){return this.endOf(f).$D},p.$locale=function(){return W[this.$L]},p.locale=function(h,m){if(!h)return this.$L;var d=this.clone(),v=bt(h,m,!0);return v&&(d.$L=v),d},p.clone=function(){return E.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},_}(),lr=Xt.prototype;return I.prototype=lr,[["$ms",s],["$s",o],["$m",a],["$H",c],["$W",u],["$M",f],["$y",w],["$D",D]].forEach(function(_){lr[_[1]]=function(p){return this.$g(p,_[0],_[1])}}),I.extend=function(_,p){return _.$i||(_(p,Xt,I),_.$i=!0),I},I.locale=bt,I.isDayjs=ot,I.unix=function(_){return I(1e3*_)},I.en=W[B],I.Ls=W,I.p={},I})})(ni);var Du=ni.exports;const Mu=He(Du);var ii={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(wn,function(){var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var c=o.prototype;a.utc=function(g){var T={date:g,utc:!0,args:arguments};return new o(T)},c.utc=function(g){var T=a(this.toDate(),{locale:this.$L,utc:!0});return g?T.add(this.utcOffset(),r):T},c.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var u=c.parse;c.parse=function(g){g.utc&&(this.$u=!0),this.$utils().u(g.$offset)||(this.$offset=g.$offset),u.call(this,g)};var l=c.init;c.init=function(){if(this.$u){var g=this.$d;this.$y=g.getUTCFullYear(),this.$M=g.getUTCMonth(),this.$D=g.getUTCDate(),this.$W=g.getUTCDay(),this.$H=g.getUTCHours(),this.$m=g.getUTCMinutes(),this.$s=g.getUTCSeconds(),this.$ms=g.getUTCMilliseconds()}else l.call(this)};var f=c.utcOffset;c.utcOffset=function(g,T){var j=this.$utils().u;if(j(g))return this.$u?0:j(this.$offset)?f.call(this):this.$offset;if(typeof g=="string"&&(g=function(B){B===void 0&&(B="");var W=B.match(n);if(!W)return null;var ot=(""+W[0]).match(i)||["-",0,0],bt=ot[0],I=60*+ot[1]+ +ot[2];return I===0?0:bt==="+"?I:-I}(g),g===null))return this;var H=Math.abs(g)<=16?60*g:g,F=this;if(T)return F.$offset=H,F.$u=g===0,F;if(g!==0){var st=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(F=this.local().add(H+st,r)).$offset=H,F.$x.$localOffset=st}else F=this.utc();return F};var $=c.format;c.format=function(g){var T=g||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return $.call(this,T)},c.valueOf=function(){var g=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*g},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var w=c.toDate;c.toDate=function(g){return g==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():w.call(this)};var D=c.diff;c.diff=function(g,T,j){if(g&&this.$u===g.$u)return D.call(this,g,T,j);var H=this.local(),F=a(g).local();return D.call(H,F,T,j)}}})})(ii);var Pu=ii.exports;const Iu=He(Pu);var rr=(t=>(t.CONTAINER="container",t.PAGE="page",t.ROOT="app",t.PAGE_FRAGMENT="page-fragment",t))(rr||{}),re=(t=>(t.COMP="comp",t.CODE="code",t.DATA_SOURCE="data-source",t))(re||{}),si=(t=>(t.CODE="code",t))(si||{}),ne=(t=>(t.CODE="code",t.DATA_SOURCE_METHOD="data-source-method",t))(ne||{});Mu.extend(Iu);const Sg=(t="")=>t.replace(/\B([A-Z])/g,"-$1").toLowerCase(),Nt=(t,e=[])=>{const r=[],n=function(i,s){if(!Array.isArray(s))return null;for(let o=0,a=s.length;o<a;o++){const c=s[o];if(r.push(c),"".concat(c.id)==="".concat(i))return c;if(c.items){const u=n(i,c.items);if(u)return u}r.pop()}return null};return n(t,e),r},se=t=>Object.prototype.toString.call(t)==="[object Object]",xu=t=>{var e;return t?((e=t.type)==null?void 0:e.toLowerCase())===rr.PAGE:!1},Lu=t=>{var e;return t?((e=t.type)==null?void 0:e.toLowerCase())===rr.PAGE_FRAGMENT:!1},Ht=(t="",e={})=>(Array.isArray(t)?t:t.replaceAll(/\[(\d+)\]/g,".$1").split(".")).reduce((n,i)=>{if(se(n)||Array.isArray(n))return n[i]},e),Le=(t,e,r={})=>Cu(r,t,e),Ae=(t,e=[])=>{const r=[],n=function(i,s){if(Array.isArray(s))for(let o=0,a=s.length;o<a;o++){const c=s[o],u=i.findIndex(l=>"".concat(l)==="".concat(c.id));u>-1&&(i.slice(u,1),r.push(c)),c.items&&n(i,c.items)}};return n(t,e),r},Nu=(t={},e)=>Array.from(Object.values(t).reduce((r,n)=>{var i;return(((i=n[e])==null?void 0:i.keys)||[]).forEach(s=>r.add(s)),r},new Set)),Hr=(t={})=>Array.from(Object.values(t).reduce((e,r)=>(Object.keys(r).forEach(n=>{e.add(n)}),e),new Set)),oi=(t,e,r)=>{var a;const n=Nt(t.id,e),i=n.pop();let s=n.pop();if(r&&(s=Nt(r,e).pop()),!i)throw new Error("未找到目标节点");if(!s)throw new Error("未找到父节点");const o=(a=s.items)==null?void 0:a.findIndex(c=>c.id===i.id);s.items.splice(o,1,t)},ai="__magic__",ci=(t,e,r={},n)=>{let i=[];if(!n)i=Nu(r,e.id);else{const s=r[n];i=(s==null?void 0:s[e.id].keys)||[]}return i.forEach(s=>{const o="".concat(s).replaceAll(/\[(\d+)\]/g,".$1").split("."),a=o.map((f,$)=>$<o.length-1?f:"".concat(ai).concat(f)),c=Ht(s,e);let u=Ht(a,e);typeof u>"u"&&(Le(a.join("."),c,e),u=c);let l;try{l=t(u)}catch(f){console.error(f),l=""}Le(s,l,e)}),e},Fu=(t,e,r,n=[])=>{var i,s;switch(typeof e=="string"&&typeof r>"u"&&(r=""),t){case"is":return e===r;case"not":return e!==r;case"=":return e===r;case"!=":return e!==r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r;case"between":return n.length>1&&e>=n[0]&&e<=n[1];case"not_between":return n.length<2||e<n[0]||e>n[1];case"include":return(i=e==null?void 0:e.includes)==null?void 0:i.call(e,r);case"not_include":return typeof e>"u"||!((s=e.includes)!=null&&s.call(e,r))}return!1},ui=t=>{const e={},r={string:void 0,object:{},array:[],boolean:void 0,number:void 0,null:null,any:void 0};return t.forEach(n=>{if(typeof n.defaultValue<"u"){if(n.type==="array"&&!Array.isArray(n.defaultValue)){e[n.name]=r.array;return}if(n.type==="object"&&!se(n.defaultValue)){if(typeof n.defaultValue=="string"){try{e[n.name]=JSON.parse(n.defaultValue)}catch(i){e[n.name]=r.object}return}e[n.name]=r.object;return}e[n.name]=$u(n.defaultValue);return}if(n.type==="object"){e[n.name]=n.fields?ui(n.fields):r.object;return}if(n.type){e[n.name]=r[n.type];return}e[n.name]=void 0}),e},oe="ds-field::";var tt=(t=>(t.DEFAULT="default",t.CODE_BLOCK="code-block",t.DATA_SOURCE="data-source",t.DATA_SOURCE_METHOD="data-source-method",t.DATA_SOURCE_COND="data-source-cond",t.RELATED_COMP_WHEN_COPY="related-comp-when-copy",t))(tt||{});class Ru{constructor(e){y(this,"isTarget");y(this,"id");y(this,"name");y(this,"type",tt.DEFAULT);y(this,"deps",{});y(this,"isCollectByDefault");var r;this.isTarget=e.isTarget,this.id=e.id,this.name=e.name,this.isCollectByDefault=(r=e.isCollectByDefault)!=null?r:!0,e.type&&(this.type=e.type),e.initialDeps&&(this.deps=e.initialDeps)}updateDep(e,r){const n=this.deps[e.id]||{name:e.name,keys:[]};e.name&&(n.name=e.name),this.deps[e.id]=n,n.keys.indexOf(r)===-1&&n.keys.push(r)}removeDep(e,r){if(!e){Object.keys(this.deps).forEach(i=>{delete this.deps[i]});return}const n=this.deps[e.id];if(n)if(r){const i=n.keys.indexOf(r);n.keys.splice(i,1),n.keys.length===0&&delete this.deps[e.id]}else delete this.deps[e.id]}hasDep(e,r){const n=this.deps[e.id];return!!(n!=null&&n.keys.find(i=>i===r))}destroy(){this.deps={}}}class Uu{constructor(e){y(this,"targetsList",{});e!=null&&e.initialTargets&&(this.targetsList=e.initialTargets)}getTargetsList(){return this.targetsList}getTargets(e=tt.DEFAULT){return this.targetsList[e]||{}}addTarget(e){const r=this.getTargets(e.type)||{};this.targetsList[e.type]=r,r[e.id]=e}getTarget(e,r=tt.DEFAULT){return this.getTargets(r)[e]}hasTarget(e,r=tt.DEFAULT){return!!this.getTarget(e,r)}hasSpecifiedTypeTarget(e=tt.DEFAULT){return Object.keys(this.getTargets(e)).length>0}removeTarget(e,r=tt.DEFAULT){const n=this.getTargets(r);n[e]&&(n[e].destroy(),delete n[e])}removeTargets(e=tt.DEFAULT){const r=this.targetsList[e];if(r){for(const n of Object.values(r))n.destroy();delete this.targetsList[e]}}clearTargets(){Object.keys(this.targetsList).forEach(e=>{delete this.targetsList[e]})}collect(e,r=!1,n){Object.values(this.targetsList).forEach(i=>{Object.values(i).forEach(s=>{!n&&!s.isCollectByDefault||n&&s.type!==n||e.forEach(o=>{s.removeDep(o),this.collectItem(o,s,r)})})})}clear(e){const r=[];Object.values(this.targetsList).forEach(n=>{Object.values(n).forEach(i=>{e?e.forEach(s=>{i.removeDep(s),Array.isArray(s.items)&&s.items.length&&!r.includes(s.id)&&(r.push(s.id),this.clear(s.items))}):i.removeDep()})})}clearByType(e,r){const n=[],i=this.getTargets(e);Object.values(i).forEach(s=>{r?r.forEach(o=>{s.removeDep(o),Array.isArray(o.items)&&o.items.length&&!n.includes(o.id)&&(n.push(o.id),this.clear(o.items))}):s.removeDep()})}collectItem(e,r,n=!1){const i=(s,o="")=>{const a=(c,u)=>{const l=c==="items",f=o?"".concat(o,".").concat(c):c;r.isTarget(f,u)?r.updateDep(e,f):!l&&Array.isArray(u)?u.forEach(($,w)=>{se($)&&i($,"".concat(f,"[").concat(w,"]"))}):se(u)&&i(u,f),l&&n&&Array.isArray(u)&&u.forEach($=>{this.collectItem($,r,n)})};Object.entries(s).forEach(([c,u])=>{typeof u>"u"||u===""||a(c,u)})};i(e)}}const Hu=(t,e)=>typeof t=="string"&&t.includes("".concat(e))&&/\$\{([\s\S]+?)\}/.test(t),Bu=(t,e)=>{if(!Array.isArray(t)||typeof t[0]!="string")return!1;const[r]=t,n=r.indexOf(oe);return n===-1?!1:r.substring(n+oe.length)===e};var Wu=typeof global=="object"&&global&&global.Object===Object&&global;const fi=Wu;var zu=typeof self=="object"&&self&&self.Object===Object&&self,Gu=fi||zu||Function("return this")();const K=Gu;var qu=K.Symbol;const G=qu;var li=Object.prototype,Ku=li.hasOwnProperty,Yu=li.toString,xt=G?G.toStringTag:void 0;function ku(t){var e=Ku.call(t,xt),r=t[xt];try{t[xt]=void 0;var n=!0}catch(s){}var i=Yu.call(t);return n&&(e?t[xt]=r:delete t[xt]),i}var Ju=Object.prototype,Xu=Ju.toString;function Zu(t){return Xu.call(t)}var Qu="[object Null]",Vu="[object Undefined]",Br=G?G.toStringTag:void 0;function it(t){return t==null?t===void 0?Vu:Qu:Br&&Br in Object(t)?ku(t):Zu(t)}function J(t){return t!=null&&typeof t=="object"}var tf="[object Symbol]";function ef(t){return typeof t=="symbol"||J(t)&&it(t)==tf}function hi(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var rf=Array.isArray;const kt=rf;var nf=1/0,Wr=G?G.prototype:void 0,zr=Wr?Wr.toString:void 0;function di(t){if(typeof t=="string")return t;if(kt(t))return hi(t,di)+"";if(ef(t))return zr?zr.call(t):"";var e=t+"";return e=="0"&&1/t==-nf?"-0":e}function Ct(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function pi(t){return t}var sf="[object AsyncFunction]",of="[object Function]",af="[object GeneratorFunction]",cf="[object Proxy]";function gi(t){if(!Ct(t))return!1;var e=it(t);return e==of||e==af||e==sf||e==cf}var uf=K["__core-js_shared__"];const Ce=uf;var Gr=function(){var t=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function ff(t){return!!Gr&&Gr in t}var lf=Function.prototype,hf=lf.toString;function yt(t){if(t!=null){try{return hf.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var df=/[\\^$.*+?()[\]{}|]/g,pf=/^\[object .+?Constructor\]$/,gf=Function.prototype,yf=Object.prototype,$f=gf.toString,mf=yf.hasOwnProperty,bf=RegExp("^"+$f.call(mf).replace(df,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vf(t){if(!Ct(t)||ff(t))return!1;var e=gi(t)?bf:pf;return e.test(yt(t))}function _f(t,e){return t==null?void 0:t[e]}function $t(t,e){var r=_f(t,e);return vf(r)?r:void 0}var Tf=$t(K,"WeakMap");const Ne=Tf;var qr=Object.create,wf=function(){function t(){}return function(e){if(!Ct(e))return{};if(qr)return qr(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const Of=wf;function yi(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Sf(){}function Ef(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var jf=800,Af=16,Cf=Date.now;function Df(t){var e=0,r=0;return function(){var n=Cf(),i=Af-(n-r);if(r=n,i>0){if(++e>=jf)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Mf(t){return function(){return t}}var Pf=function(){try{var t=$t(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();const ae=Pf;var If=ae?function(t,e){return ae(t,"toString",{configurable:!0,enumerable:!1,value:Mf(e),writable:!0})}:pi;const xf=If;var Lf=Df(xf);const Nf=Lf;function Ff(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function Rf(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function Uf(t){return t!==t}function Hf(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function Bf(t,e,r){return e===e?Hf(t,e,r):Rf(t,Uf,r)}function Wf(t,e){var r=t==null?0:t.length;return!!r&&Bf(t,e,0)>-1}var zf=9007199254740991,Gf=/^(?:0|[1-9]\d*)$/;function $i(t,e){var r=typeof t;return e=e==null?zf:e,!!e&&(r=="number"||r!="symbol"&&Gf.test(t))&&t>-1&&t%1==0&&t<e}function mi(t,e,r){e=="__proto__"&&ae?ae(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function me(t,e){return t===e||t!==t&&e!==e}var qf=Object.prototype,Kf=qf.hasOwnProperty;function bi(t,e,r){var n=t[e];(!(Kf.call(t,e)&&me(n,r))||r===void 0&&!(e in t))&&mi(t,e,r)}function Jt(t,e,r,n){var i=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=n?n(r[a],t[a],a,r,t):void 0;c===void 0&&(c=t[a]),i?mi(r,a,c):bi(r,a,c)}return r}var Kr=Math.max;function Yf(t,e,r){return e=Kr(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=Kr(n.length-e,0),o=Array(s);++i<s;)o[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(o),yi(t,this,a)}}function nr(t,e){return Nf(Yf(t,e,pi),t+"")}var kf=9007199254740991;function vi(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=kf}function be(t){return t!=null&&vi(t.length)&&!gi(t)}function _i(t,e,r){if(!Ct(r))return!1;var n=typeof e;return(n=="number"?be(r)&&$i(e,r.length):n=="string"&&e in r)?me(r[e],t):!1}function Jf(t){return nr(function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&_i(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var a=r[n];a&&t(e,a,n,s)}return e})}var Xf=Object.prototype;function ir(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Xf;return t===r}function Zf(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Qf="[object Arguments]";function Yr(t){return J(t)&&it(t)==Qf}var Ti=Object.prototype,Vf=Ti.hasOwnProperty,tl=Ti.propertyIsEnumerable,el=Yr(function(){return arguments}())?Yr:function(t){return J(t)&&Vf.call(t,"callee")&&!tl.call(t,"callee")};const wi=el;function rl(){return!1}var Oi=typeof exports=="object"&&exports&&!exports.nodeType&&exports,kr=Oi&&typeof module=="object"&&module&&!module.nodeType&&module,nl=kr&&kr.exports===Oi,Jr=nl?K.Buffer:void 0,il=Jr?Jr.isBuffer:void 0,sl=il||rl;const Si=sl;var ol="[object Arguments]",al="[object Array]",cl="[object Boolean]",ul="[object Date]",fl="[object Error]",ll="[object Function]",hl="[object Map]",dl="[object Number]",pl="[object Object]",gl="[object RegExp]",yl="[object Set]",$l="[object String]",ml="[object WeakMap]",bl="[object ArrayBuffer]",vl="[object DataView]",_l="[object Float32Array]",Tl="[object Float64Array]",wl="[object Int8Array]",Ol="[object Int16Array]",Sl="[object Int32Array]",El="[object Uint8Array]",jl="[object Uint8ClampedArray]",Al="[object Uint16Array]",Cl="[object Uint32Array]",P={};P[_l]=P[Tl]=P[wl]=P[Ol]=P[Sl]=P[El]=P[jl]=P[Al]=P[Cl]=!0;P[ol]=P[al]=P[bl]=P[cl]=P[vl]=P[ul]=P[fl]=P[ll]=P[hl]=P[dl]=P[pl]=P[gl]=P[yl]=P[$l]=P[ml]=!1;function Dl(t){return J(t)&&vi(t.length)&&!!P[it(t)]}function sr(t){return function(e){return t(e)}}var Ei=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ft=Ei&&typeof module=="object"&&module&&!module.nodeType&&module,Ml=Ft&&Ft.exports===Ei,De=Ml&&fi.process,Pl=function(){try{var t=Ft&&Ft.require&&Ft.require("util").types;return t||De&&De.binding&&De.binding("util")}catch(e){}}();const St=Pl;var Xr=St&&St.isTypedArray,Il=Xr?sr(Xr):Dl;const xl=Il;var Ll=Object.prototype,Nl=Ll.hasOwnProperty;function ji(t,e){var r=kt(t),n=!r&&wi(t),i=!r&&!n&&Si(t),s=!r&&!n&&!i&&xl(t),o=r||n||i||s,a=o?Zf(t.length,String):[],c=a.length;for(var u in t)(e||Nl.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||$i(u,c)))&&a.push(u);return a}function Ai(t,e){return function(r){return t(e(r))}}var Fl=Ai(Object.keys,Object);const Rl=Fl;var Ul=Object.prototype,Hl=Ul.hasOwnProperty;function Bl(t){if(!ir(t))return Rl(t);var e=[];for(var r in Object(t))Hl.call(t,r)&&r!="constructor"&&e.push(r);return e}function ve(t){return be(t)?ji(t):Bl(t)}function Wl(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var zl=Object.prototype,Gl=zl.hasOwnProperty;function ql(t){if(!Ct(t))return Wl(t);var e=ir(t),r=[];for(var n in t)n=="constructor"&&(e||!Gl.call(t,n))||r.push(n);return r}function _e(t){return be(t)?ji(t,!0):ql(t)}var Kl=Jf(function(t,e,r,n){Jt(e,_e(e),t,n)});const Zr=Kl;var Yl=$t(Object,"create");const Bt=Yl;function kl(){this.__data__=Bt?Bt(null):{},this.size=0}function Jl(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Xl="__lodash_hash_undefined__",Zl=Object.prototype,Ql=Zl.hasOwnProperty;function Vl(t){var e=this.__data__;if(Bt){var r=e[t];return r===Xl?void 0:r}return Ql.call(e,t)?e[t]:void 0}var th=Object.prototype,eh=th.hasOwnProperty;function rh(t){var e=this.__data__;return Bt?e[t]!==void 0:eh.call(e,t)}var nh="__lodash_hash_undefined__";function ih(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Bt&&e===void 0?nh:e,this}function dt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}dt.prototype.clear=kl;dt.prototype.delete=Jl;dt.prototype.get=Vl;dt.prototype.has=rh;dt.prototype.set=ih;function sh(){this.__data__=[],this.size=0}function Te(t,e){for(var r=t.length;r--;)if(me(t[r][0],e))return r;return-1}var oh=Array.prototype,ah=oh.splice;function ch(t){var e=this.__data__,r=Te(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():ah.call(e,r,1),--this.size,!0}function uh(t){var e=this.__data__,r=Te(e,t);return r<0?void 0:e[r][1]}function fh(t){return Te(this.__data__,t)>-1}function lh(t,e){var r=this.__data__,n=Te(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function X(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}X.prototype.clear=sh;X.prototype.delete=ch;X.prototype.get=uh;X.prototype.has=fh;X.prototype.set=lh;var hh=$t(K,"Map");const Wt=hh;function dh(){this.size=0,this.__data__={hash:new dt,map:new(Wt||X),string:new dt}}function ph(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function we(t,e){var r=t.__data__;return ph(e)?r[typeof e=="string"?"string":"hash"]:r.map}function gh(t){var e=we(this,t).delete(t);return this.size-=e?1:0,e}function yh(t){return we(this,t).get(t)}function $h(t){return we(this,t).has(t)}function mh(t,e){var r=we(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function mt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}mt.prototype.clear=dh;mt.prototype.delete=gh;mt.prototype.get=yh;mt.prototype.has=$h;mt.prototype.set=mh;function Ci(t){return t==null?"":di(t)}function or(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var Qr=G?G.isConcatSpreadable:void 0;function bh(t){return kt(t)||wi(t)||!!(Qr&&t&&t[Qr])}function Di(t,e,r,n,i){var s=-1,o=t.length;for(r||(r=bh),i||(i=[]);++s<o;){var a=t[s];e>0&&r(a)?e>1?Di(a,e-1,r,n,i):or(i,a):n||(i[i.length]=a)}return i}var vh=Ai(Object.getPrototypeOf,Object);const ar=vh;var _h="[object Object]",Th=Function.prototype,wh=Object.prototype,Mi=Th.toString,Oh=wh.hasOwnProperty,Sh=Mi.call(Object);function Eh(t){if(!J(t)||it(t)!=_h)return!1;var e=ar(t);if(e===null)return!0;var r=Oh.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Mi.call(r)==Sh}var jh="[object DOMException]",Ah="[object Error]";function Pi(t){if(!J(t))return!1;var e=it(t);return e==Ah||e==jh||typeof t.message=="string"&&typeof t.name=="string"&&!Eh(t)}var Ch=nr(function(t,e){try{return yi(t,void 0,e)}catch(r){return Pi(r)?r:new Error(r)}});const Dh=Ch;function Mh(t){return function(e){return t==null?void 0:t[e]}}function Ph(){this.__data__=new X,this.size=0}function Ih(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function xh(t){return this.__data__.get(t)}function Lh(t){return this.__data__.has(t)}var Nh=200;function Fh(t,e){var r=this.__data__;if(r instanceof X){var n=r.__data__;if(!Wt||n.length<Nh-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new mt(n)}return r.set(t,e),this.size=r.size,this}function Dt(t){var e=this.__data__=new X(t);this.size=e.size}Dt.prototype.clear=Ph;Dt.prototype.delete=Ih;Dt.prototype.get=xh;Dt.prototype.has=Lh;Dt.prototype.set=Fh;function Rh(t,e){return t&&Jt(e,ve(e),t)}function Uh(t,e){return t&&Jt(e,_e(e),t)}var Ii=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Vr=Ii&&typeof module=="object"&&module&&!module.nodeType&&module,Hh=Vr&&Vr.exports===Ii,tn=Hh?K.Buffer:void 0,en=tn?tn.allocUnsafe:void 0;function Bh(t,e){if(e)return t.slice();var r=t.length,n=en?en(r):new t.constructor(r);return t.copy(n),n}function Wh(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[i++]=o)}return s}function xi(){return[]}var zh=Object.prototype,Gh=zh.propertyIsEnumerable,rn=Object.getOwnPropertySymbols,qh=rn?function(t){return t==null?[]:(t=Object(t),Wh(rn(t),function(e){return Gh.call(t,e)}))}:xi;const cr=qh;function Kh(t,e){return Jt(t,cr(t),e)}var Yh=Object.getOwnPropertySymbols,kh=Yh?function(t){for(var e=[];t;)or(e,cr(t)),t=ar(t);return e}:xi;const Li=kh;function Jh(t,e){return Jt(t,Li(t),e)}function Ni(t,e,r){var n=e(t);return kt(t)?n:or(n,r(t))}function Xh(t){return Ni(t,ve,cr)}function Zh(t){return Ni(t,_e,Li)}var Qh=$t(K,"DataView");const Fe=Qh;var Vh=$t(K,"Promise");const Re=Vh;var td=$t(K,"Set");const Tt=td;var nn="[object Map]",ed="[object Object]",sn="[object Promise]",on="[object Set]",an="[object WeakMap]",cn="[object DataView]",rd=yt(Fe),nd=yt(Wt),id=yt(Re),sd=yt(Tt),od=yt(Ne),ct=it;(Fe&&ct(new Fe(new ArrayBuffer(1)))!=cn||Wt&&ct(new Wt)!=nn||Re&&ct(Re.resolve())!=sn||Tt&&ct(new Tt)!=on||Ne&&ct(new Ne)!=an)&&(ct=function(t){var e=it(t),r=e==ed?t.constructor:void 0,n=r?yt(r):"";if(n)switch(n){case rd:return cn;case nd:return nn;case id:return sn;case sd:return on;case od:return an}return e});const ur=ct;var ad=Object.prototype,cd=ad.hasOwnProperty;function ud(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&cd.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var fd=K.Uint8Array;const un=fd;function fr(t){var e=new t.constructor(t.byteLength);return new un(e).set(new un(t)),e}function ld(t,e){var r=e?fr(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var hd=/\w*$/;function dd(t){var e=new t.constructor(t.source,hd.exec(t));return e.lastIndex=t.lastIndex,e}var fn=G?G.prototype:void 0,ln=fn?fn.valueOf:void 0;function pd(t){return ln?Object(ln.call(t)):{}}function gd(t,e){var r=e?fr(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var yd="[object Boolean]",$d="[object Date]",md="[object Map]",bd="[object Number]",vd="[object RegExp]",_d="[object Set]",Td="[object String]",wd="[object Symbol]",Od="[object ArrayBuffer]",Sd="[object DataView]",Ed="[object Float32Array]",jd="[object Float64Array]",Ad="[object Int8Array]",Cd="[object Int16Array]",Dd="[object Int32Array]",Md="[object Uint8Array]",Pd="[object Uint8ClampedArray]",Id="[object Uint16Array]",xd="[object Uint32Array]";function Ld(t,e,r){var n=t.constructor;switch(e){case Od:return fr(t);case yd:case $d:return new n(+t);case Sd:return ld(t,r);case Ed:case jd:case Ad:case Cd:case Dd:case Md:case Pd:case Id:case xd:return gd(t,r);case md:return new n;case bd:case Td:return new n(t);case vd:return dd(t);case _d:return new n;case wd:return pd(t)}}function Nd(t){return typeof t.constructor=="function"&&!ir(t)?Of(ar(t)):{}}var Fd="[object Map]";function Rd(t){return J(t)&&ur(t)==Fd}var hn=St&&St.isMap,Ud=hn?sr(hn):Rd;const Hd=Ud;var Bd="[object Set]";function Wd(t){return J(t)&&ur(t)==Bd}var dn=St&&St.isSet,zd=dn?sr(dn):Wd;const Gd=zd;var qd=1,Kd=2,Yd=4,Fi="[object Arguments]",kd="[object Array]",Jd="[object Boolean]",Xd="[object Date]",Zd="[object Error]",Ri="[object Function]",Qd="[object GeneratorFunction]",Vd="[object Map]",tp="[object Number]",Ui="[object Object]",ep="[object RegExp]",rp="[object Set]",np="[object String]",ip="[object Symbol]",sp="[object WeakMap]",op="[object ArrayBuffer]",ap="[object DataView]",cp="[object Float32Array]",up="[object Float64Array]",fp="[object Int8Array]",lp="[object Int16Array]",hp="[object Int32Array]",dp="[object Uint8Array]",pp="[object Uint8ClampedArray]",gp="[object Uint16Array]",yp="[object Uint32Array]",C={};C[Fi]=C[kd]=C[op]=C[ap]=C[Jd]=C[Xd]=C[cp]=C[up]=C[fp]=C[lp]=C[hp]=C[Vd]=C[tp]=C[Ui]=C[ep]=C[rp]=C[np]=C[ip]=C[dp]=C[pp]=C[gp]=C[yp]=!0;C[Zd]=C[Ri]=C[sp]=!1;function ie(t,e,r,n,i,s){var o,a=e&qd,c=e&Kd,u=e&Yd;if(r&&(o=i?r(t,n,i,s):r(t)),o!==void 0)return o;if(!Ct(t))return t;var l=kt(t);if(l){if(o=ud(t),!a)return Ef(t,o)}else{var f=ur(t),$=f==Ri||f==Qd;if(Si(t))return Bh(t,a);if(f==Ui||f==Fi||$&&!i){if(o=c||$?{}:Nd(t),!a)return c?Jh(t,Uh(o,t)):Kh(t,Rh(o,t))}else{if(!C[f])return i?t:{};o=Ld(t,f,a)}}s||(s=new Dt);var w=s.get(t);if(w)return w;s.set(t,o),Gd(t)?t.forEach(function(T){o.add(ie(T,e,r,T,t,s))}):Hd(t)&&t.forEach(function(T,j){o.set(j,ie(T,e,r,j,t,s))});var D=u?c?Zh:Xh:c?_e:ve,g=l?void 0:D(t);return Ff(g||t,function(T,j){g&&(j=T,T=t[j]),bi(o,j,ie(T,e,r,j,t,s))}),o}var $p=1,mp=4;function Hi(t){return ie(t,$p|mp)}var bp="__lodash_hash_undefined__";function vp(t){return this.__data__.set(t,bp),this}function _p(t){return this.__data__.has(t)}function ce(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new mt;++e<r;)this.add(t[e])}ce.prototype.add=ce.prototype.push=vp;ce.prototype.has=_p;function Tp(t,e){return t.has(e)}function Bi(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}function wp(t){return J(t)&&be(t)}function Op(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var Sp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ep=Mh(Sp);const jp=Ep;var Wi=/[&<>"']/g,Ap=RegExp(Wi.source);function Cp(t){return t=Ci(t),t&&Ap.test(t)?t.replace(Wi,jp):t}function Dp(t,e){return hi(e,function(r){return t[r]})}var zi=Object.prototype,Mp=zi.hasOwnProperty;function pn(t,e,r,n){return t===void 0||me(t,zi[r])&&!Mp.call(n,r)?e:t}var Pp={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Ip(t){return"\\"+Pp[t]}var xp=/<%=([\s\S]+?)%>/g;const Gi=xp;var Lp=/<%-([\s\S]+?)%>/g;const Np=Lp;var Fp=/<%([\s\S]+?)%>/g;const Rp=Fp;var Up={escape:Np,evaluate:Rp,interpolate:Gi,variable:"",imports:{_:{escape:Cp}}};const gn=Up;var Hp="Invalid `variable` option passed into `_.template`",Bp=/\b__p \+= '';/g,Wp=/\b(__p \+=) '' \+/g,zp=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gp=/[()=,{}\[\]\/\s]/,qp=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qt=/($^)/,Kp=/['\n\r\u2028\u2029\\]/g,Yp=Object.prototype,yn=Yp.hasOwnProperty;function $n(t,e,r){var n=gn.imports._.templateSettings||gn;r&&_i(t,e,r)&&(e=void 0),t=Ci(t),e=Zr({},e,n,pn);var i=Zr({},e.imports,n.imports,pn),s=ve(i),o=Dp(i,s),a,c,u=0,l=e.interpolate||Qt,f="__p += '",$=RegExp((e.escape||Qt).source+"|"+l.source+"|"+(l===Gi?qp:Qt).source+"|"+(e.evaluate||Qt).source+"|$","g"),w=yn.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace($,function(T,j,H,F,st,B){return H||(H=F),f+=t.slice(u,B).replace(Kp,Ip),j&&(a=!0,f+="' +\n__e("+j+") +\n'"),st&&(c=!0,f+="';\n"+st+";\n__p += '"),H&&(f+="' +\n((__t = ("+H+")) == null ? '' : __t) +\n'"),u=B+T.length,T}),f+="';\n";var D=yn.call(e,"variable")&&e.variable;if(!D)f="with (obj) {\n"+f+"\n}\n";else if(Gp.test(D))throw new Error(Hp);f=(c?f.replace(Bp,""):f).replace(Wp,"$1").replace(zp,"$1;"),f="function("+(D||"obj")+") {\n"+(D?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(c?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Dh(function(){return Function(s,w+"return "+f).apply(void 0,o)});if(g.source=f,Pi(g))throw g;return g}var kp=1/0,Jp=Tt&&1/Bi(new Tt([,-0]))[1]==kp?function(t){return new Tt(t)}:Sf;const Xp=Jp;var Zp=200;function Qp(t,e,r){var n=-1,i=Wf,s=t.length,o=!0,a=[],c=a;if(r)o=!1,i=Op;else if(s>=Zp){var u=e?null:Xp(t);if(u)return Bi(u);o=!1,i=Tp,c=new ce}else c=e?[]:a;t:for(;++n<s;){var l=t[n],f=e?e(l):l;if(l=r||l!==0?l:0,o&&f===f){for(var $=c.length;$--;)if(c[$]===f)continue t;e&&c.push(f),a.push(l)}else i(c,f,r)||(c!==a&&c.push(f),a.push(l))}return a}var Vp=nr(function(t){return Qp(Di(t,1,wp,!0))});const tg=Vp;var fe,zt,Gt,ft,qt;class qi extends Pn{constructor(r){var n,i,s,o;super();y(this,"isInit",!1);y(this,"data",{});y(this,"app");y(this,"mockData");z(this,fe,"base");z(this,zt,void 0);z(this,Gt,void 0);z(this,ft,[]);z(this,qt,[]);V(this,zt,r.schema.id),V(this,Gt,r.schema),this.app=r.app,this.setFields(r.schema.fields),this.setMethods(r.schema.methods||[]),this.app.platform==="editor"?(this.mockData=((i=(n=r.schema.mocks)==null?void 0:n.find(a=>a.useInEditor))==null?void 0:i.data)||this.getDefaultData(),this.setData(this.mockData)):typeof r.useMock=="boolean"&&r.useMock?(this.mockData=((o=(s=r.schema.mocks)==null?void 0:s.find(a=>a.enable))==null?void 0:o.data)||this.getDefaultData(),this.setData(this.mockData)):r.initialData?(this.setData(r.initialData),this.isInit=!0):this.setData(this.getDefaultData())}get id(){return U(this,zt)}get type(){return U(this,fe)}get schema(){return U(this,Gt)}get fields(){return U(this,ft)}get methods(){return U(this,qt)}setFields(r){V(this,ft,r)}setMethods(r){V(this,qt,r)}setData(r,n){n?Le(n,r,this.data):this.data=r;const i={updateData:r,path:n};this.emit("change",i)}getDefaultData(){return ui(U(this,ft))}async init(){this.isInit=!0}destroy(){this.data={},V(this,ft,[]),this.removeAllListeners()}}fe=new WeakMap,zt=new WeakMap,Gt=new WeakMap,ft=new WeakMap,qt=new WeakMap;const mn=t=>Object.entries(t).reduce((e,[r,n])=>{let i=n;return typeof n=="object"&&(i=JSON.stringify(n)),typeof n<"u"?"".concat(e).concat(e?"&":"").concat(globalThis.encodeURIComponent(r),"=").concat(globalThis.encodeURIComponent("".concat(i))):e},""),eg=async t=>{var l;const{url:e,method:r="GET",headers:n={},params:i={},data:s={},...o}=t,a=mn(i);let c=JSON.stringify(s);return(l=n["Content-Type"])!=null&&l.includes("application/x-www-form-urlencoded")&&(c=mn(s)),(await globalThis.fetch(a?"".concat(e,"?").concat(a):e,{method:r,headers:n,body:r==="GET"?void 0:c,...o})).json()};var wt,Kt,Yt,le;class rg extends qi{constructor(r){const{options:n}=r.schema;super(r);y(this,"isLoading",!1);y(this,"error");y(this,"httpOptions");z(this,wt,void 0);z(this,Kt,[]);z(this,Yt,[]);z(this,le,"http");this.httpOptions=n,typeof r.request=="function"?V(this,wt,r.request):typeof globalThis.fetch=="function"&&V(this,wt,eg),this.methods.forEach(i=>{typeof i.content=="function"&&(i.timing==="beforeRequest"&&U(this,Kt).push(i.content),i.timing==="afterRequest"&&U(this,Yt).push(i.content))})}get type(){return U(this,le)}async init(){this.schema.autoFetch&&await this.request(this.httpOptions),super.init()}async request(r={}){var i,s;this.isLoading=!0;let n={...this.httpOptions,...r};try{for(const a of U(this,Kt))await a({options:n,params:{},dataSource:this,app:this.app});typeof this.schema.beforeRequest=="function"&&(n=this.schema.beforeRequest(n,{app:this.app,dataSource:this}));let o=this.mockData?this.mockData:await((i=U(this,wt))==null?void 0:i.call(this,n));for(const a of U(this,Yt))await a({res:o,options:n,params:{},dataSource:this,app:this.app});if(typeof this.schema.afterResponse=="function"&&(o=this.schema.afterResponse(o,{app:this.app,dataSource:this,options:n})),(s=this.schema.responseOptions)!=null&&s.dataPath){const a=Ht(this.schema.responseOptions.dataPath,o);this.setData(a)}else this.setData(o);this.error=void 0}catch(o){this.error={msg:o.message},this.emit("error",o)}this.isLoading=!1}get(r){return this.request({...r,method:"GET"})}post(r){return this.request({...r,method:"POST"})}}wt=new WeakMap,Kt=new WeakMap,Yt=new WeakMap,le=new WeakMap;const ng=(t,e)=>{if(!t.displayConds||!Array.isArray(t.displayConds)||!t.displayConds.length)return!0;for(const{cond:r}of t.displayConds){if(!r)continue;let n=!0;for(const{op:i,value:s,range:o,field:a}of r){const[c,...u]=a;if(!e[c]||!u.length)break;const f=Ht(u.join("."),e[c]);if(!Fu(i,f,s,o)){n=!1;break}}if(n)return!0}return!1},bn=(t,e)=>{var r;if(xu(t)||Lu(t)){const n=(r=e.items)==null?void 0:r.findIndex(i=>i.id===t.id);e.items.splice(n,1,t)}else oi(t,e.items)},ig=(t,e,r=[])=>{const n={[e]:{}};return r.reduce((i,s,o)=>(i[s]=o===r.length-1?t:{},i[s]),n[e]),n},sg=(t,e)=>{const[r,...n]=t,i=r.indexOf(oe);if(i>-1){const s=r.substring(i+oe.length),o=e[s];return o?Ht(n.join("."),o):t}return t},Ki=(t,e)=>typeof t=="string"?$n(t)(e):t!=null&&t.isBindDataSource&&t.dataSourceId?e[t.dataSourceId]:t!=null&&t.isBindDataSourceField&&t.dataSourceId&&typeof t.template=="string"?$n(t.template)(e[t.dataSourceId]):Array.isArray(t)&&typeof t[0]=="string"?sg(t,e):t,og=(t,e,r,n=[])=>{const i=new Uu;i.addTarget(new Ru({id:r,isTarget:(o,a)=>"".concat(o).startsWith(ai)?!1:Hu(a,r)||Bu(a,r)})),i.collect(e,!0);const{deps:s}=i.getTarget(r);return Object.keys(s).length?e.map(o=>{var a;return(a=s[o.id])!=null&&a.keys.length?ci(c=>{const u=ig(t,r,n);return Ki(c,u)},Hi(o),{[r]:s},r):o}):e},ut=class ut extends Pn{constructor({app:r,useMock:n,initialData:i}){var o,a;super();y(this,"app");y(this,"dataSourceMap",new Map);y(this,"data",{});y(this,"useMock",!1);this.app=r,this.useMock=n,i&&(this.data=i),(a=(o=r.dsl)==null?void 0:o.dataSources)==null||a.forEach(c=>{this.addDataSource(c)});const s=Array.from(this.dataSourceMap);Promise.allSettled(s.map(([,c])=>this.init(c))).then(c=>{const u={};c.forEach((l,f)=>{if(l.status==="fulfilled"){const $=s[f][0];u[$]=this.data[$]}}),this.emit("init",u)})}static register(r,n){ut.dataSourceClassMap.set(r,n)}static registe(r,n){ut.register(r,n)}static getDataSourceClass(r){return ut.dataSourceClassMap.get(r)}async init(r){var s;if(r.isInit||this.app.jsEngine&&((s=r.schema.disabledInitInJsEngine)!=null&&s.includes(this.app.jsEngine)))return;const n=[],i=[];r.methods.forEach(o=>{typeof o.content=="function"&&(o.timing==="beforeInit"&&n.push(o.content),o.timing==="afterInit"&&i.push(o.content))});for(const o of n)await o({params:{},dataSource:r,app:this.app});await r.init();for(const o of i)await o({params:{},dataSource:r,app:this.app})}get(r){return this.dataSourceMap.get(r)}async addDataSource(r){if(!r)return;const n=ut.dataSourceClassMap.get(r.type)||qi,i=new n({app:this.app,schema:r,request:this.app.request,useMock:this.useMock,initialData:this.data[r.id]});this.dataSourceMap.set(r.id,i),this.data[i.id]=i.data,i.on("change",s=>{this.setData(i,s)})}setData(r,n){this.data[r.id]=r.data,this.emit("change",r.id,n)}removeDataSource(r){var n;(n=this.get(r))==null||n.destroy(),delete this.data[r],this.dataSourceMap.delete(r)}updateSchema(r){r.forEach(n=>{if(!this.get(n.id))return;this.removeDataSource(n.id),this.addDataSource(n);const s=this.get(n.id);s&&this.init(s)})}compiledNode({items:r,...n},i,s=!1){var a;const o=Hi(n);return r&&(o.items=Array.isArray(r)&&s?r.map(c=>this.compiledNode(c,i,s)):r),n.condResult===!1||n.visible===!1?o:ci(c=>Ki(c,this.data),o,((a=this.app.dsl)==null?void 0:a.dataSourceDeps)||{},i)}compliedConds(r){return ng(r,this.data)}compliedIteratorItems(r,n,i=[]){const[s,...o]=i;return this.get(s)?og(r,n,s,o):n}destroy(){this.removeAllListeners(),this.data={},this.dataSourceMap.forEach(r=>{r.destroy()}),this.dataSourceMap.clear()}};y(ut,"dataSourceClassMap",new Map);let ue=ut;ue.register("http",rg);const Yi=ue,ag=(t,e,r)=>{const{dsl:n,platform:i}=t;if(!(n!=null&&n.dataSources))return;const s=new Yi({app:t,useMock:e,initialData:r});return n.dataSources&&n.dataSourceCondDeps&&i!=="editor"&&Ae(Hr(n.dataSourceCondDeps),n.items).forEach(o=>{o.condResult=s.compliedConds(o),bn(o,n)}),n.dataSources&&n.dataSourceDeps&&Ae(Hr(n.dataSourceDeps),n.items).forEach(o=>{bn(s.compiledNode(o),n)}),t.jsEngine!=="nodejs"&&s.on("change",(o,a)=>{var f,$;const c=((f=n.dataSourceDeps)==null?void 0:f[o])||{},u=(($=n.dataSourceCondDeps)==null?void 0:$[o])||{},l=tg([...Object.keys(u),...Object.keys(c)]);s.emit("update-data",Ae(l,n.items).map(w=>(t.platform!=="editor"&&(w.condResult=s.compliedConds(w)),s.compiledNode(w))),o,a)}),s};class cg{constructor(e=globalThis.navigator.userAgent,r={}){y(this,"isIos",!1);y(this,"isIphone",!1);y(this,"isIpad",!1);y(this,"isAndroid",!1);y(this,"isAndroidPad",!1);y(this,"isMac",!1);y(this,"isWin",!1);y(this,"isMqq",!1);y(this,"isWechat",!1);y(this,"isWeb",!1);this.isIphone=e.indexOf("iPhone")>=0,this.isIpad=/(iPad).*OS\s([\d_]+)/.test(e),this.isIos=this.isIphone||this.isIpad,this.isAndroid=e.indexOf("Android")>=0,this.isAndroidPad=this.isAndroid&&e.indexOf("Mobile")<0,this.isMac=e.indexOf("Macintosh")>=0,this.isWin=e.indexOf("Windows")>=0,this.isMqq=/QQ\/([\d.]+)/.test(e),this.isWechat=e.indexOf("MicroMessenger")>=0&&e.indexOf("wxwork")<0,this.isWeb=!this.isIos&&!this.isAndroid&&!/(WebOS|BlackBerry)/.test(e),Object.entries(r).forEach(([n,i])=>{this[n]=i})}}const vn=cg,_n="magic:common:events:",ki="magic:common:actions:",Vt={SHOW:"show",HIDE:"hide",SCROLL_TO_VIEW:"scrollIntoView",SCROLL_TO_TOP:"scrollToTop"},ug=t=>t.startsWith(_n)?t:"".concat(_n).concat(t),fg=t=>t.startsWith(ki),Ji=(t,e)=>{var n;if(!t)return!1;if(!t.id)return Ji(t.parentElement,e);const r=(n=e.page)==null?void 0:n.getNode(t.id);return r||!1},Tn=(t,e,r)=>{const n=Ji(r.target,t);n&&t.emit(ug(e),n)},lg=t=>{t.jsEngine==="browser"&&(window.document.body.addEventListener("click",e=>{Tn(t,"click",e)}),window.document.body.addEventListener("click",e=>{Tn(t,"click:capture",e)},!0))},hg=(t,e)=>{var n;const{instance:r}=e;if(r)switch(t.replace(ki,"")){case Vt.SHOW:r.show();break;case Vt.HIDE:r.hide();break;case Vt.SCROLL_TO_VIEW:(n=r.$el)==null||n.scrollIntoView({behavior:"smooth"});break;case Vt.SCROLL_TO_TOP:window.scrollTo({top:0,behavior:"smooth"});break}};class dg{constructor(){y(this,"data",{})}set(e,r){this.data[e]=r}get(e){return this.data[e]}}class pg extends We.EventEmitter{constructor(r){super();y(this,"data");y(this,"style");y(this,"events");y(this,"instance");y(this,"page");y(this,"parent");y(this,"app");y(this,"store",new dg);this.page=r.page,this.parent=r.parent,this.app=r.app;const{events:n}=r.config;this.data=r.config,this.events=n||[],this.listenLifeSafe()}setData(r){this.data=r,this.emit("update-data")}destroy(){this.removeAllListeners()}listenLifeSafe(){this.once("created",async r=>{this.once("destroy",()=>{this.instance=null,typeof this.data.destroy=="function"&&this.data.destroy(this),this.listenLifeSafe()}),this.instance=r,await this.runHookCode("created")}),this.once("mounted",async r=>{this.instance=r;const n=this.app.eventQueueMap[r.config.id]||[];for(let i=n.shift();i;i=n.shift())this.app.compActionHandler(i.eventConfig,i.fromCpt,i.args);await this.runHookCode("mounted")})}async runHookCode(r){var i,s,o;if(typeof this.data[r]=="function"){await this.data[r](this);return}const n=this.data[r];if((n==null?void 0:n.hookType)===si.CODE)for(const a of n.hookData){const{codeType:c=ne.CODE,codeId:u,params:l={}}=a;let f;const $={app:this.app,params:l};if(c===ne.CODE&&typeof u=="string"&&((i=this.app.codeDsl)!=null&&i[u]))f=this.app.codeDsl[u].content;else if(c===ne.DATA_SOURCE_METHOD&&Array.isArray(u)&&u.length>1){const w=(s=this.app.dataSourceManager)==null?void 0:s.get(u[0]);f=(o=w==null?void 0:w.methods.find(D=>D.name===u[1]))==null?void 0:o.content,$.dataSource=w}f&&typeof f=="function"&&await f($)}}}const Ue=pg;class gg extends Ue{constructor(r){super(r);y(this,"nodes",new Map);this.setNode(r.config.id,this),this.initNode(r.config,this)}initNode(r,n){var s,o,a;const i=new Ue({config:r,parent:n,page:this,app:this.app});if(this.setNode(r.id,i),r.type==="page-fragment-container"&&r.pageFragmentId){const c=(o=(s=this.app.dsl)==null?void 0:s.items)==null?void 0:o.find(u=>u.id===r.pageFragmentId);c&&(r.items=[c])}(a=r.items)==null||a.forEach(c=>{this.initNode(c,i)})}getNode(r){return this.nodes.get(r)}setNode(r,n){this.nodes.set(r,n)}deleteNode(r){this.nodes.delete(r)}destroy(){super.destroy(),this.nodes.clear()}}const yg=gg,$g=t=>{if(typeof t!="string")return t;const e={};return t.split(";").forEach(r=>{if(!r)return;const n=r.split(":");let i=n.shift(),s=n.join(":");i&&(i=i.replace(/^\s*/,"").replace(/\s*$/,""),s=s.replace(/^\s*/,"").replace(/\s*$/,""),i=i.split("-").map((o,a)=>a>0?"".concat(o[0].toUpperCase()).concat(o.substr(1)):o).join(""),e[i]=s)}),e},mg=t=>t&&!/^url/.test(t)&&!/^linear-gradient/.test(t)?"url(".concat(t,")"):t,bg=t=>/^(-?\d+)(\.\d+)?$/.test(t);class vg extends We.EventEmitter{constructor(r){var n;super();y(this,"env",new vn);y(this,"dsl");y(this,"codeDsl");y(this,"dataSourceManager");y(this,"page");y(this,"useMock",!1);y(this,"platform","mobile");y(this,"jsEngine","browser");y(this,"designWidth",375);y(this,"request");y(this,"components",new Map);y(this,"eventQueueMap",{});y(this,"eventList",new Map);this.setEnv(r.ua),this.codeDsl=(n=r.config)==null?void 0:n.codeBlocks,r.platform&&(this.platform=r.platform),r.jsEngine&&(this.jsEngine=r.jsEngine),typeof r.useMock=="boolean"&&(this.useMock=r.useMock),typeof r.designWidth<"u"&&this.setDesignWidth(r.designWidth),r.transformStyle&&(this.transformStyle=r.transformStyle),r.request&&(this.request=r.request),r.config&&this.setConfig(r.config,r.curPage),lg(this)}setEnv(r){this.env=new vn(r)}setDesignWidth(r){this.designWidth=r,this.jsEngine==="browser"&&(this.calcFontsize(),globalThis.removeEventListener("resize",this.calcFontsize),globalThis.addEventListener("resize",this.calcFontsize))}transformStyle(r){if(!r)return{};let n={};const i={};typeof r=="string"?n=$g(r):n={...r};const s=this.jsEngine==="hippy",o=["zIndex","opacity","fontWeight"];return Object.entries(n).forEach(([a,c])=>{a==="scale"&&!i.transform&&s?i.transform=[{scale:c}]:a==="backgroundImage"&&!s?c&&(i[a]=mg(c)):a==="transform"&&typeof c!="string"?i[a]=this.getTransform(c):!o.includes(a)&&c&&/^[-]?[0-9]*[.]?[0-9]*$/.test(c)?i[a]=s?c:"".concat(c/100,"rem"):i[a]=c}),i}setConfig(r,n){var i,s;this.dsl=r,!n&&r.items.length&&(n=r.items[0].id),this.dataSourceManager&&this.dataSourceManager.destroy(),this.dataSourceManager=ag(this,this.useMock),this.codeDsl=r.codeBlocks,this.setPage(n||((s=(i=this.page)==null?void 0:i.data)==null?void 0:s.id))}addPage(){console.info("addPage 已经弃用")}setPage(r){var i,s;const n=(i=this.dsl)==null?void 0:i.items.find(o=>"".concat(o.id)==="".concat(r));if(!n){this.page&&(this.page.destroy(),this.page=void 0),super.emit("page-change");return}n!==((s=this.page)==null?void 0:s.data)&&(this.page&&this.page.destroy(),this.page=new yg({config:n,app:this}),super.emit("page-change",this.page),this.bindEvents())}deletePage(){this.page=void 0}getPage(r){if(!r)return this.page;if(this.page&&"".concat(this.page.data.id)==="".concat(r))return this.page}registerComponent(r,n){this.components.set(r,n)}unregisterComponent(r){this.components.delete(r)}resolveComponent(r){return this.components.get(r)}bindEvents(){var r;if(Array.from(this.eventList.keys()).forEach(n=>{const i=this.eventList.get(n);i&&this.off(i,n)}),this.eventList.clear(),!!this.page)for(const[,n]of this.page.nodes)(r=n.events)==null||r.forEach(i=>{const s="".concat(i.name,"_").concat(n.data.id),o=(a,...c)=>{this.eventHandler(i,a,c)};this.eventList.set(o,s),this.on(s,o)})}emit(r,...n){var o;const[i,...s]=n;return i instanceof Ue&&((o=i==null?void 0:i.data)!=null&&o.id)?super.emit("".concat(String(r),"_").concat(i.data.id),i,...s):super.emit(r,...n)}async codeActionHandler(r,n){var a,c;const{codeId:i="",params:s={}}=r;if(!i||ju(this.codeDsl))return;const o=(c=(a=this.codeDsl)==null?void 0:a[i])==null?void 0:c.content;typeof o=="function"&&await o({app:this,params:s,eventParams:n})}async compActionHandler(r,n,i){if(!this.page)throw new Error("当前没有页面");const{method:s,to:o}=r,a=this.page.getNode(o);if(!a)throw"ID为".concat(o,"的组件不存在");if(fg(s))return hg(s,a);a.instance?typeof a.instance[s]=="function"&&await a.instance[s](n,...i):this.addEventToMap({eventConfig:r,fromCpt:n,args:i})}async dataSourceActionHandler(r,n){var f;const{dataSourceMethod:i=[],params:s={}}=r,[o,a]=i;if(!o||!a)return;const c=(f=this.dataSourceManager)==null?void 0:f.get(o);if(!c)return;const l=(c.methods||[]).find($=>$.name===a);l&&typeof l.content=="function"&&await l.content({app:this,params:s,dataSource:c,eventParams:n})}destroy(){this.removeAllListeners(),this.page=void 0,this.jsEngine==="browser"&&globalThis.removeEventListener("resize",this.calcFontsize)}async eventHandler(r,n,i){if(Tu(r,"actions")){const{actions:s}=r;for(const o of s)o.actionType===re.COMP?await this.compActionHandler(o,n,i):o.actionType===re.CODE?await this.codeActionHandler(o,i):o.actionType===re.DATA_SOURCE&&await this.dataSourceActionHandler(o,i)}else await this.compActionHandler(r,n,i)}addEventToMap(r){this.eventQueueMap[r.eventConfig.to]?this.eventQueueMap[r.eventConfig.to].push(r):this.eventQueueMap[r.eventConfig.to]=[r]}getTransform(r){if(!r)return[];const n=Object.entries(r).map(([s,o])=>o.trim()?(s==="rotate"&&bg(o)&&(o="".concat(o,"deg")),this.jsEngine!=="hippy"?"".concat(s,"(").concat(o,")"):{[s]:o}):"");if(this.jsEngine==="hippy")return n;const i=n.join(" ");return i.trim()?i:"none"}calcFontsize(){const{width:r}=document.documentElement.getBoundingClientRect(),n=r/(this.designWidth/100);document.documentElement.style.fontSize="".concat(n,"px")}}const _g=vg,Tg=Vue.defineComponent({__name:"App",setup(t){var o;const e=Vue.inject("app"),r=Vue.ref(),n=Vue.ref(),i=Vue.ref(),s=Vue.computed(()=>{var a,c,u,l;return((c=(a=r.value)==null?void 0:a.items)==null?void 0:c.find(f=>f.id===n.value))||((l=(u=r.value)==null?void 0:u.items)==null?void 0:l[0])});return Vue.watch(s,async()=>{await Vue.nextTick();const a=document.querySelector(".magic-ui-page");a&&window.magic.onPageElUpdate(a)}),(o=window.magic)==null||o.onRuntimeReady({getApp(){return e},updateRootConfig(a){r.value=a,e==null||e.setConfig(a,n.value)},updatePageId(a){n.value=a,e==null||e.setPage(a)},select(a){var u;i.value=a,e!=null&&e.getPage(a)&&((u=this.updatePageId)==null||u.call(this,a));const c=document.getElementById("".concat(a));return c||Vue.nextTick().then(()=>document.getElementById("".concat(a)))},add({config:a,parentId:c}){var l,f,$,w,D;if(!r.value)throw new Error("error");if(!i.value)throw new Error("error");if(!c)throw new Error("error");const u=Nt(c,[r.value]).pop();if(!u)throw new Error("未找到父节点");if(a.type!=="page"){const g=(l=e==null?void 0:e.page)==null?void 0:l.getNode(u.id);g&&((f=e==null?void 0:e.page)==null||f.initNode(a,g))}if(u.id!==i.value){const g=($=u.items)==null?void 0:$.findIndex(T=>T.id===i.value);(w=u.items)==null||w.splice(g+1,0,a)}else(D=u.items)==null||D.push(a)},update({config:a,parentId:c}){var f,$;if(!r.value||!e)throw new Error("error");const u=((f=e.dataSourceManager)==null?void 0:f.compiledNode(a,void 0,!0))||a;oi(Vue.reactive(u),[r.value],c);const l=($=e.page)==null?void 0:$.getNode(a.id);l&&l.setData(a)},remove({id:a,parentId:c}){var $,w;if(!r.value)throw new Error("error");const u=Nt(a,[r.value]).pop();if(!u)throw new Error("未找到目标元素");const l=Nt(c,[r.value]).pop();if(!l)throw new Error("未找到父元素");u.type==="page"?e==null||e.deletePage():($=e==null?void 0:e.page)==null||$.deleteNode(u.id);const f=(w=l.items)==null?void 0:w.findIndex(D=>D.id===u.id);l.items.splice(f,1)}}),(a,c)=>{const u=Vue.resolveComponent("magic-ui-page");return s.value?(Vue.openBlock(),Vue.createBlock(u,{key:s.value.id,config:s.value},null,8,["config"])):Vue.createCommentVNode("",!0)}}});Promise.all([Se(()=>import("./comp-entry-MVY3HTlM.js"),__vite__mapDeps([0,1])),Se(()=>import("./plugin-entry-YvMT15k-.js"),__vite__mapDeps([])),Se(()=>import("./datasource-entry-OfwQwX0w.js"),__vite__mapDeps([]))]).then(([t,e,r])=>{const n=Vue.createApp(Tg);Object.entries(t.default).forEach(([s,o])=>{n.component("magic-ui-".concat(s),o)}),Object.entries(r).forEach(([s,o])=>{Yi.registe(s,o)}),Object.values(e.default).forEach(s=>{n.use(s)});const i=new _g({ua:window.navigator.userAgent,platform:"editor"});i.env.isWeb&&i.setDesignWidth(window.document.documentElement.getBoundingClientRect().width),window.appInstance=i,n.config.globalProperties.app=i,n.provide("app",i),n.mount("#app")});export{Og as __vite_legacy_guard,Sg as t};
//# sourceMappingURL=index-T3kRzYPw.js.map
